[{"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/index.js":"1","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/App.js":"2","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/app/store.js":"3","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/utils.js":"4","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/services/users.js":"5","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/services/posts.js":"6","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Posts/PostsItemsList.js":"7","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Posts/PostItem.js":"8","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/UserList.js":"9","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/User.js":"10","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/UserDetails.js":"11","/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/UserData.js":"12"},{"size":368,"mtime":1645497411541,"results":"13","hashOfConfig":"14"},{"size":106,"mtime":1645497411537,"results":"15","hashOfConfig":"14"},{"size":383,"mtime":1645497411537,"results":"16","hashOfConfig":"14"},{"size":522,"mtime":1645497247651,"results":"17","hashOfConfig":"14"},{"size":1117,"mtime":1645497411541,"results":"18","hashOfConfig":"14"},{"size":1710,"mtime":1645497411541,"results":"19","hashOfConfig":"14"},{"size":2897,"mtime":1645497411537,"results":"20","hashOfConfig":"14"},{"size":584,"mtime":1645497411537,"results":"21","hashOfConfig":"14"},{"size":513,"mtime":1645497411541,"results":"22","hashOfConfig":"14"},{"size":426,"mtime":1645497411537,"results":"23","hashOfConfig":"14"},{"size":888,"mtime":1645497411541,"results":"24","hashOfConfig":"14"},{"size":2448,"mtime":1645497411537,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1ku1lg4",{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","suppressedMessages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"42","messages":"43","suppressedMessages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"45","messages":"46","suppressedMessages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","suppressedMessages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","suppressedMessages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63"},"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/index.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/App.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/app/store.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/utils.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/services/users.js",[],[],["64","65"],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/services/posts.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Posts/PostsItemsList.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Posts/PostItem.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/UserList.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/User.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/UserDetails.js",[],[],"/home/bvangelov/projects/bozhidar-vangelov-technical-interview-part-two/src/components/Users/UserData.js",["66"],[],"import { Fragment, useEffect, useState } from 'react'\nimport {\n  Button,\n  Form,\n  Container,\n  InputGroup,\n  FormControl\n} from 'react-bootstrap'\nimport {\n  useGetAllUsersQuery,\n  useUpdateUserByIdMutation\n} from '../../services/users'\nimport { getEntries, getDifferences } from '../../utils'\n\nconst UserData = ({ userId }) => {\n  const [updateUserById] = useUpdateUserByIdMutation()\n  const { user } = useGetAllUsersQuery(undefined, {\n    selectFromResult: ({ data }) => ({\n      user: data?.find(u => u.id === userId)\n    })\n  })\n\n  const [userInfo, setUserInfo] = useState({})\n\n  const [, ...entries] = getEntries(userInfo)\n\n  const updateWithCachedState = () => {\n    const cachedEntries = getEntries(user)\n    const state = cachedEntries\n      .map(([key, value]) => ({\n        [key]: value\n      }))\n      .reduce((result, current) => ({ ...result, ...current }), {})\n\n      setUserInfo(state)\n  }\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n\n    const newValues = getDifferences(user, userInfo)\n\n    await updateUserById({\n      userId,\n      ...newValues\n    })\n  }\n\n  const handleOnChange = e => {\n    setUserInfo(prevState => ({\n      ...prevState,\n      [e.target.name]: e.target.value\n    }))\n  }\n\n  const handleRevertChanges = () => {\n    updateWithCachedState()\n  }\n\n  useEffect(() => {\n    console.log({user})\n    updateWithCachedState()\n  }, [user])\n\n  return (\n    <Container fluid id='info' className='border-bottom'>\n      <Form onSubmit={handleSubmit} className='d-flex flex-wrap'>\n        <Container fluid id='inputs' className='d-flex flex-wrap'>\n          {entries.map(([key, value], index) => (\n            <Fragment key={`${index}${key}`}>\n              <InputGroup className='mb-3'>\n                <InputGroup.Text>{key}</InputGroup.Text>\n                <FormControl\n                  name={key}\n                  value={value}\n                  onChange={handleOnChange}\n                />\n              </InputGroup>\n            </Fragment>\n          ))}\n        </Container>\n        <Container\n          fluid\n          id='buttons'\n          className='d-flex justify-content-evenly mt-5 mb-5'\n        >\n          <Button variant='success' type='submit'>\n            Confirm changes\n          </Button>\n          <Button variant='danger' onClick={handleRevertChanges}>\n            Revert changes\n          </Button>\n        </Container>\n      </Form>\n    </Container>\n  )\n}\n\nexport default UserData\n",{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","severity":1,"message":"72","line":63,"column":6,"nodeType":"73","endLine":63,"endColumn":12,"suggestions":"74"},"no-native-reassign",["75"],"no-negated-in-lhs",["76"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'updateWithCachedState'. Either include it or remove the dependency array.","ArrayExpression",["77"],"no-global-assign","no-unsafe-negation",{"desc":"78","fix":"79"},"Update the dependencies array to be: [updateWithCachedState, user]",{"range":"80","text":"81"},[1375,1381],"[updateWithCachedState, user]"]